<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    
    <link rel="stylesheet" href="style.css"> 
    
</head>
<body>

    <div id="home-screen" class="app-container main-screen">
        <header class="app-title-area">
            <button id="top-nav-home-settings" class="action-button settings-button">
                <span class="material-symbols-outlined">settings</span>
            </button>
        </header>
        
        <div id="mode-selection-area" class="game-mode-selection hidden">
            <h2>ุงุฎุชุฑ ุทุฑููุฉ ุงููุนุจ:</h2>
            <div class="mode-buttons-container">
                <button class="mode-button active" data-mode="target-score" data-limit="200">
                    ยฑ200
                </button>
                <button class="mode-button" data-mode="fixed-rounds" data-limit="4">
                    (4) ููุงุช
                </button>
                <button class="mode-button" data-mode="open" data-limit="0">
                     ููุชูุญ
                </button>
            </div>
        </div>

        <div id="player-selection-area" class="mode-selection-area hidden">
             <div class="team-column">
                    <h3>ุงููุฑูู ุงูุฃูู</h3>
                     <select id="team2-player1-select" class="player-select main-button team-option" required>
                        <option value="">ุงุฎุชุฑ ุงููุงุนุจ</option>
                    </select>
                    <select id="team2-player2-select" class="player-select main-button team-option">
                        <option value="">ุงุฎุชูุงุฑ ูุงุนุจ ุฅุถุงูู (ุงุฎุชูุงุฑู)</option>
                    </select>
                </div>
            <div class="team-selection-row">
                <div class="team-column">
                    <h3>ุงููุฑูู ุงูุซุงูู</h3>
                    <select id="team1-player1-select" class="player-select main-button team-option" required>
                        <option value="">ุงุฎุชุฑ ุงููุงุนุจ</option>
                    </select>
                     <select id="team1-player2-select" class="player-select main-button team-option">
                        <option value="">ุงุฎุชูุงุฑ ูุงุนุจ ุฅุถุงูู (ุงุฎุชูุงุฑู)</option>
                    </select>
                </div>
            </div>
            <p class="small-text-error hidden" id="player-selection-error">ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ูุงุนุจูู ูุฎุชูููู ููู ูุฑูู.</p>
            
            <button id="start-selected-mode-button" class="main-button primary-button" disabled>
                ุงุจุฏุฃ ุงููุนุจ
            </button>
        </div>
        
        <section id="game-type-selection" class="menu-options">
            <button id="team-game-button" class="main-button team-option">
                ูุนุจุฉ ูุฑูู 
                <i class="icon-people">๐ฅ</i> 
            </button>
            <button id="solo-game-type-button" class="main-button solo-option">
                  ูุนุจุฉ ูุฑุฏู
                <i class="icon-person">๐ค</i>
            </button>
        </section>
    </div>
    
<div id="players-screen" class="screen hidden">
    
 <header class="top-nav-bar">
        <button id="players-back-button" class="action-button empty-button">
            </button>
        <span class="header-title"></span> 
        <button class="action-button empty-button"></button> 
        
        <div class="header-overlay-fix"></div>
        
    </header>

    <div class="tab-controls-container">
    <button id="leaderboard-button" class="tab-button active-tab">ููุญุฉ ุงูุตุฏุงุฑุฉ</button>
    <button id="players-list-button" class="tab-button">ูุงุฆูุฉ ุงููุงุนุจูู</button>
</div>

    <div class="screen-content">

        <div id="player-management-area">
            
            <button id="add-player-button-full" class="main-button primary-button player-add-button-full">
                <span class="material-symbols-outlined">person_add</span>
                ุฅุถุงูุฉ ูุงุนุจ ุฌุฏูุฏ
            </button>
                
            <section id="add-player-form-area" class="add-player-form-area hidden">
                
                <input type="text" id="new-player-name1" placeholder="ุงูุงุณู ุงูุฃูู" dir="rtl">
                <input type="text" id="new-player-name2" placeholder="ุงุณู ุงูุนุงุฆูุฉ (ุงุฎุชูุงุฑู)" dir="rtl">
                
              <div class="player-icon-selection">
                <p>ุงุฎุชุฑ ุฑูุฒุงู/ุฅูููุฌูุงู ููุงุนุจ (ุญุฑู ูุงุญุฏ):</p>
                
                <input type="text" id="new-player-icon-input" placeholder="ูุซุงู: ๐" maxlength="2" dir="ltr">
                
                <div id="selected-icon-preview" class="player-icon-display">
                    <span id="preview-icon">๐ค</span> 
                </div>
              </div>
                
                <button id="save-new-player" class="main-button team-option">ุฅุถุงูุฉ ูุญูุธ</button>
            </section>

            <section class="import-section">
                <p id="import-status"></p>
            </section>
            
            <section class="players-list-section">
                <ul id="players-list">
                    </ul>
            </section>
        </div>
        
        <div id="leaderboard-area" class="hidden">
            <ul id="leaderboard-list">
                 </ul>
        </div>
        
    </div>
</div>

    <div id="score-screen" class="screen hidden">
        <header class="app-header team-header">
            <div class="header-action-group">
                <button id="cancel-game-button" class="action-button">
                    <span class="material-symbols-outlined">close</span>
                </button>
                <button id="quick-penalty-button" class="action-button" title="ุนููุจุฉ ุณุฑูุนุฉ -40">
                    <span class="material-symbols-outlined">bomb</span>
                </button>
            </div>
            <h2>ูุนุจุฉ ูุฑูู</h2>
            <button id="reset-button" class="action-button">
                <span class="material-symbols-outlined">restart_alt</span>
            </button>
        </header>
        
        <div class="app-container"> 
            <section class="total-scores-display">
                
                <div class="team-total-card team-total-theirs" data-team-key="theirs">
                    <h3 class="total-label" id="label-team-theirs"></h3> 
                    <p class="total-score" id="score-team-theirs">0</p>
                    <button class="add-ten-quick-button action-button" data-team-key="theirs">+10</button>
                    <span class="win-type-overlay" id="theirs-win-overlay"></span> 
                    <div class="win-icons" id="win-icons-theirs"></div>
                </div>

                <div class="team-total-card team-total-ours" data-team-key="ours">
                    <h3 class="total-label" id="label-team-ours"></h3>
                    <p class="total-score" id="score-team-ours">0</p>
                    <button class="add-ten-quick-button action-button" data-team-key="ours">+10</button>
                    <span class="win-type-overlay" id="ours-win-overlay"></span>
                    <div class="win-icons" id="win-icons-ours"></div>
                </div>
            </section>

            <section class="new-round-input-area">
                <div class="win-type-buttons">
                    <button id="win-20" class="win-type-button active" data-win-type="normal">ุนุงุฏู๐</button>
                    <button id="win-40" class="win-type-button" data-win-type="double">ุฏุจู๐ฅ</button>
                    <button id="win-80" class="win-type-button" data-win-type="double-double">ุฏุจููู๐</button>
                </div>

                <div class="score-input-container">
                    <div class="input-and-multiplier-wrapper">
                        <div id="multiplier-display" class="multiplier-display-box">X1</div>
                        <input type="number" id="score-input-loser" class="score-input" placeholder="ููุงุท ุงูููุฒูู" min="0" inputmode="numeric" dir="ltr">
                    </div>
                </div>
                
                <button id="add-scores-button" class="record-button">ุชุณุฌูู</button>
            </section>
        </div>
    </div> 
    
   <div id="history-screen" class="screen hidden">
    <header class="app-header team-header">
        <button class="action-button empty-button"></button>
        <h2>ุณุฌู ููุงุช ุงููุนุจุฉ</h2>
        <button class="action-button empty-button"></button>
    </header>

    <div class="app-container">
        <section class="rounds-history-log">
            <div class="history-header">
                <span class="history-label round-label">ุงูุณุฌู</span> 
                <span class="history-label delete-label"></span> 
                </div>
            <ul id="rounds-list">
                </ul>
        </section>
    </div>
</div>
    <div id="win-screen" class="screen hidden">
    <div class="win-screen-content">
        <div class="trophy-container">
            <img src="trophy.png" alt="ูุฃุณ ุงูููุฒ" class="trophy-image">
            <div class="confetti"></div>
        </div>

        <h1 class="win-text">ุฃููููููุฒุฒุฒุฒ</h1>
        <h2 id="winner-names">ุงุณู ุงููุฑูู ุงููุงุฆุฒ</h2>
        
        <div id="win-stats-container">
            
            <div class="stat-card winner-card" id="winner-stats-card">
                <div class="win-stats" id="winner-stats-content">
                </div>
            </div>

            <div class="stat-card loser-card" id="loser-stats-card">
                <div class="win-stats" id="loser-stats-content">
                </div>
            </div>
            
        </div>
        
        <button id="win-screen-new-game" class="action-button primary-button large-button">
            ุงุจุฏุฃ ูุนุจุฉ ุฌุฏูุฏุฉ
        </button>
        <button id="win-screen-review" class="action-button secondary-button large-button">
            ูุฑุงุฌุนุฉ ุงูุณุฌู ูุงููุชุงุฆุฌ
        </button>
    </div>
</div>

  <div id="game-archive-screen" class="screen hidden">
    <header class="app-header team-header">
        <button id="archive-back-button" class="action-button empty-button">
             </button>
        <h2>ุณุฌู ุงูุฃูุนุงุจ</h2>
        <button class="action-button empty-button"></button> 
    </header>
        
        <div class="app-container game-archive-area">
            <div id="archive-list-container" class="archive-list">
                <p id="archive-loading-message" class="loading-message">ุฌุงุฑู ุชุญููู ุณุฌู ุงูุฃูุนุงุจ...</p>
            </div>
        </div>
    </div>

<div id="settings-screen" class="screen hidden">
    <header class="app-header team-header">
        <button id="settings-back-button" class="action-button back-button">
            <span class="material-symbols-outlined">arrow_back</span> 
        </button>
        <h2>ุงูุฅุนุฏุงุฏุงุช</h2>
        <button class="action-button empty-button"></button>
    </header>
    
    <div class="app-container"> 
        <div id="emoji-explanation-box" class="explanation-card">
            <h3>ุฏููู ุฑููุฒ ุงูุฅุญุตุงุฆูุงุช ูุงูุฅูุฌุงุฒุงุช โจ</h3>
            
            <div class="category-section">
                <div class="category-title">ูุชุงุฆุฌ ููุคุดุฑุงุช ุงููุนุจ</div>
                <div class="grid-layout">
                    <p><span class="emoji-icon">๐</span> ููุฒ ุงููุจุงุฑุงุฉ</p>
                    <p><span class="emoji-icon">๐</span> ุฎุณุงุฑุฉ ุงููุจุงุฑุงุฉ</p>
                    <p><span class="emoji-icon">๐งฎ</span> ุฅุฌูุงูู ุงููุนุจ</p>
                </div>
            </div>
            
            <div class="category-section">
                <div class="category-title">ูุณุชููุงุช ุงูุฃุฏุงุก ูุงูุฌูุงุฆุฒ</div>
                <div class="grid-layout">
                    <p><span class="emoji-icon">๐</span> ุฏุจู ุฏุจู (80 ููุทุฉ)</p>
                    <p><span class="emoji-icon">๐ฅ</span> ุฏุจู (40 ููุทุฉ)</p>
                    <p><span class="emoji-icon">๐</span> ุนุงุฏู (20 ููุทุฉ)</p>
                    <p><span class="emoji-icon">๐ฏ</span> ุนุดุฑุฉ ุฒุงุฆุฏุฉ</p>
                    <p><span class="emoji-icon">๐ฃ</span> ุนููุจุฉ</p>
                </div>
            </div>
            
        </div>
    </div>
</div>
<footer id="home-nav-bar" class="bottom-nav-bar hidden">
        <button id="nav-home-history" class="nav-button">
             <span class="material-symbols-outlined">history</span>
             <span class="nav-label">ุณุฌู ุงูุฃูุนุงุจ</span> 
        </button>
        
        <button id="nav-home-main" class="nav-button active">
             <span class="material-symbols-outlined">home</span>
             <span class="nav-label">ุงูุฑุฆูุณูุฉ</span>
        </button>
        
        <button id="nav-players" class="nav-button">
             <span class="material-symbols-outlined">group</span>
             <span class="nav-label">ููุญุฉ ุงูุตุฏุงุฑุฉ</span>
        </button>
    </footer>

    <footer id="bottom-nav-bar" class="bottom-nav-bar hidden">
        <button id="nav-scores" class="nav-button active">
             <span class="material-symbols-outlined">calculate</span>
             <span class="nav-label">ุงูููุงุท</span>
        </button>
        <button id="nav-history" class="nav-button">
             <span class="material-symbols-outlined">history</span>
             <span class="nav-label">ุงูููุงุช</span> 
        </button>
    </footer>

    <div id="penalty-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button material-symbols-outlined" id="close-penalty-modal">close</span>
            <h2>ุนููุจุฉ ููุฑูุฉ (-40) ๐ฃ</h2>
            <p>ุงุฎุชุฑ ุงููุฑูู ุซู ุงููุงุนุจ ุงูุฐู ุณุชุณุฌู ุนููู ุงูุนููุจุฉ.</p>
            
            <div class="selection-group">
                <label for="penalty-team-select">ุงุฎุชุฑ ุงููุฑูู:</label>
                <select id="penalty-team-select" class="main-button team-option">
                    <option value="">-- ุงุฎุชุฑ ุงููุฑูู --</option>
                </select>
            </div>
            
            <div class="selection-group hidden" id="penalty-player-group">
                <label for="penalty-player-select">ุงุฎุชุฑ ุงููุงุนุจ:</label>
                <select id="penalty-player-select" class="main-button team-option">
                    <option value="">-- ุงุฎุชุฑ ุงููุงุนุจ --</option>
                </select>
            </div>
            
            <button id="apply-penalty-button" class="main-button primary-button" disabled>
                ุชุณุฌูู ุงูุนููุจุฉ (-40)
            </button>
        </div>
    </div>
    
    <div id="player-win-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button material-symbols-outlined" id="close-player-win-modal">close</span>
            <h2 id="win-modal-title">ุชุณุฌูู ุงูููุงุท</h2>
            <p id="win-modal-description">ุงุฎุชุฑ ุงููุงุนุจ ูู ุงููุฑูู <span id="win-modal-team-name" style="font-weight: bold;"></span> ุงูุฐู ุฌูุจ <span id="win-modal-points" style="font-weight: bold;"></span> ููุทุฉ.</p>
            
            <div class="selection-group">
                <label for="win-player-select">ุงุฎุชุฑ ุงููุงุนุจ:</label>
                <select id="win-player-select" class="main-button team-option">
                    <option value="">-- ุงุฎุชุฑ ุงููุงุนุจ --</option>
                </select>
            </div>
            
            <button id="confirm-score-player-button" class="main-button primary-button" disabled>
                ุชุณุฌูู ุงูููุงุท
            </button>
            
            <input type="hidden" id="modal-team-key" value="">
            <input type="hidden" id="modal-round-type" value="">
            <input type="hidden" id="modal-base-score" value="">
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
<script src="archive-handler.js"></script>
    <script src="leaderboard-handler.js"></script>
    <script src="script.js"></script> 
</body>
</html>
